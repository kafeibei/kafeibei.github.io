"use strict";!function(i){function e(t,i){this.options={activityClass:"activity-status"},this.element=$(i),$.extend(this.options,t),this.init()}(e.prototype=new i.Raffle).extraEvent=function(){this.initModal(),this.initEraser();var t="Other"==i.utils.mobileDevice()?"click":"touchstart";this.element.on(t,".img-up",$.proxy(this._scratchLimit,this))},e.prototype.initEraser=function(){var s=this;if(this.limit())return!1;$(".scratch-canvas").eraser({progressFunction:function(t){18<Math.round(100*t)&&($(".scratch-canvas").eraser("clear"),s.lotteryModal(function(t,i){s.element.find(".scratchit-reward").html(i.reward),s.drawModal(i)}),$(".raffle-reset").addClass(s.options.activityClass))}})},e.prototype._scratchLimit=function(t){var i=this.limit();i&&this.utils.toast({msg:i})},e.prototype.initReset=function(){var t=this.limit();if(t)return this.utils.toast({msg:t}),this.element.find(".scratch-canvas").eraser("disable"),!1;this.element.find(".scratch-canvas").eraser("reset"),$(".raffle-reset").removeClass(this.options.activityClass)},$.fn.scratch=function(i){var s=this,a=Array.prototype.slice.call(arguments,1);return this.each(function(){var t=$(s).data("scratch");t?t[i].apply(t,a):t=$(s).data("scratch",new e(i,s))})}}(window);